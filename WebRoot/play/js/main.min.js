/**
 * Created by whw-apple on 16/8/1.
 */
$(function(){
    if ($(".filter_cont ul").size() > 0){
        $(".filter_cont ul li.item_list span:not('.explore')").click(function(){
            $(this).addClass("active").siblings().removeClass("active");
        });
        $(".explore").click(function(){
           $(this).parent().parent().toggleClass("no_hidden");
        });
    }
    $(".like").click(function () {
        $(this).toggleClass("fa-heart-o");
    })
    $(".subject_menu li").click(function () {
        window.location.href = 'project_list.html'
    })
    if ($(".tabs").size() > 0){
        tabs(".tabs");
    }
    $(".login_btn").click(function(){
        window.location.href= "login.html";
    });

    var login_html,logout_url;
    // console.log(IndexDemo("user_center"));

    if (IndexDemo("user_center") == 1 || IndexDemo("user_center") == 38){
        login_html = '<span class="avatar login"><img src="../img/user_avatar.jpg" /></span>' +
            '<a href="my_study.html" class="login_link">个人中心</a> | <a href="../help.html">帮助</a>' +
            '<ul class="user_menu_list">' +
            '<li class="active"><a href="my_ability.html">我的胜任力</a></li>' +
            '<li><a href="my_study.html">我的学习</a></li>' +
            '<li><a href="my_fav.html">我的收藏</a></li>' +
           '<li><a href="my_account.html">我的学习卡</a></li>' +
            '<li><a href="../my_subject.html">我的学科</a></li>' +
            '<li><a href="my_message.html">我的消息</a></li>' +
            '<li><a href="my_doc.html">学习档案</a></li>' +
            '<li><a href="man_account.html">账号管理</a></li>' +
            '<li class="top_border logout"><a href="javascript:void(0);">安全退出</a></li>' +
            '</ul>';
        logout_url = "../index.html";
    }else{
        login_html = '<span class="avatar login"><img src="img/user_avatar.jpg" /></span>' +
            '<a href="user_center/my_study.html" class="login_link">个人中心</a> | <a href="help.html">帮助</a>' +
            '<ul class="user_menu_list">' +
            '<li class="active"><a href="user_center/my_ability.html">我的胜任力</a></li>' +
            '<li><a href="user_center/my_study.html">我的学习</a></li>' +
            '<li><a href="user_center/my_fav.html">我的收藏</a></li>' +
            '<li><a href="user_center/my_account.html">我的学习卡</a></li>' +
            '<li><a href="my_subject.html">我的学科</a></li>' +
            '<li><a href="user_center/my_message.html">我的消息</a></li>' +
            '<li><a href="user_center/my_doc.html">学习档案</a></li>' +
            '<li><a href="user_center/man_account.html">账号管理</a></li>' +
            '<li class="top_border logout"><a href="javascript:void(0);">安全退出</a></li>' +
            '</ul>';
        logout_url = "index.html";
    }

    if (window.localStorage.getItem("isLogin") == "true"){
        $(".menu_bar .right_nav").empty().html(login_html);
        $(".header .top_cont .right_nav").empty().html(login_html);
    }
    $(".logout").click(function () {
        window.localStorage.removeItem("isLogin");
        window.location.href = logout_url;
    });
    $(".search_form button").click(function () {
        window.location.href = "search_results.html";
    });
});

function tabs(tabarea){
    $(tabarea + " .tab_list .tab").each(function(){
        $(this).click(function(){
            $(this).addClass("active").siblings().removeClass("active");
            var c_name = $(this).attr("id");
            $(tabarea + " .tab_cont." + c_name).show().siblings(".tab_cont").hide();
        });
    });
}
function IndexDemo(str2){
    var str1 = window.location.pathname;
    var s = str1.indexOf(str2);
    return(s);
}
// get url param
(function($){
    $.getUrlParam = function(name){
        var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r!=null) return unescape(r[2]); return null;
    }
})(jQuery);